<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <link  href="css/ratchet.css" rel="stylesheet">
    <link  href="css/ratchet-theme-android.css" rel="stylesheet">
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100%; width: 100%; }
    </style>
  </head>
  <body>
    <header class="bar bar-nav">
      <a id ="return" class="icon icon-left-nav pull-left"></a>
      <h1 class="title">Ma Localisation</h1>
    </header>
      <div id="map_canvas"></div>
      <script src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
      <script>
        var Latitude = undefined;
        var Longitude = undefined;

        function getMapLocation() {
          console.log("Récupération des coordonnées de géolocalisation");
          navigator.geolocation.getCurrentPosition(onMapSuccess, onMapError, { enableHighAccuracy: true });
        }
        var onMapSuccess = function (position) {
          Latitude = position.coords.latitude;
          Longitude = position.coords.longitude;

          console.log('latitude:'+ Latitude + '\n'+ 'longitude:' + Longitude);

          getMap(Latitude, Longitude);
          console.log("getMap finie");

          //window.location = "getMap2.html";

          //google.maps.event.addDomListener(window, 'load', getMap(Latitude, Longitude));
          console.log("dom done");
        }

        function initialize(Latitude,Longitude) {
          var myOptions = {
            center: new google.maps.LatLng(Latitude, Longitude),
            zoom: 8,
            mapTypeId: google.maps.MapTypeId.ROADMAP
          };
          var map = new google.maps.Map(document.getElementById("map_canvas"),
              myOptions);
        }
        google.maps.event.addDomListener(window, 'load', initialize(59,18));
      </script>
  </body>
</html>